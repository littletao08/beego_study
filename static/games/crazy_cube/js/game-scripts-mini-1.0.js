(function(e,t,n){var r=qc.defineBehaviour("qc.engine.Enemy",qc.Behaviour,function(){this.speed=8,this.radius=30},{});r.prototype.awake=function(){s.instance.GAME_RESTART.add(this.onGameRestart,this)},r.prototype.onGameRestart=function(){this.gameObject.destroy()},r.prototype.update=function(){if(!s.instance.running)return;this.gameObject.anchoredX<0&&this.gameObject.anchoredX+this.speed>=0&&a.instance.add(1),this.gameObject.anchoredX+=this.speed;var e=Math.pow(this.gameObject.anchoredX-u.instance.gameObject.anchoredX,2),t=Math.pow(this.gameObject.anchoredY-u.instance.gameObject.anchoredY,2),n=Math.sqrt(e+t);n<this.radius+u.instance.radius&&(console.log("touch"),s.instance.gameOver()),this.gameObject.anchoredX>this.gameObject.parent.width/2+100&&this.gameObject.destroy()};var i=qc.defineBehaviour("qc.engine.EnemyManager",qc.Behaviour,function(){this.pattern=[{timing:[0,1,1,2],spacing:[0,0,1,0]},{timing:[0,0],spacing:[0,1]},{timing:[0,0,1],spacing:[0,1,0]},{timing:[0,0,1,1],spacing:[0,1,0,1]},{timing:[0,0,1],spacing:[0,1,1]},{timing:[0,1,1,2],spacing:[1,0,1,1]},{timing:[0,1,1,1],spacing:[1,0,1,2]},{timing:[0,1],spacing:[1,0]},{timing:[0,0,0,1],spacing:[0,1,2,1]}],this.tick=0,this.nextTick=-1},{enemyPrefab:qc.Serializer.PREFAB});i.prototype.awake=function(){s.instance.GAME_START.add(this.onGameStart,this),s.instance.GAME_OVER.add(this.onGameOver,this),s.instance.GAME_RESTART.add(this.onGameRestart,this)},i.prototype.update=function(){if(!s.instance.running)return;this.tick++,this.tick==this.nextTick&&this.spawn()},i.prototype.onGameStart=function(){this.tick=0,this.nextTick=-1,this.spawn()},i.prototype.onGameOver=function(){this.onGameStart()},i.prototype.onGameRestart=function(){this.spawn()},i.prototype.spawn=function(){var e=this.pattern[Math.floor(Math.random()*this.pattern.length)];for(var t=0;t<e.timing.length;t++){var n=this.game.add.clone(this.enemyPrefab,this.gameObject);n.anchoredX=-800-e.timing[t]*100,n.anchoredY=-100-e.spacing[t]*100}this.nextTick=this.tick+e.timing.length*20+100};var s=qc.defineBehaviour("qc.engine.GameManager",qc.Behaviour,function(){s.instance=this,this.GAME_START=new qc.Signal,this.GAME_OVER=new qc.Signal,this.GAME_RESTART=new qc.Signal,this.running=!1},{});s.prototype.awake=function(){this.gameStart()},s.prototype.gameStart=function(){this.GAME_START.dispatch(),this.running=!0},s.prototype.gameOver=function(){this.GAME_OVER.dispatch(),this.running=!1},s.prototype.restart=function(){this.GAME_RESTART.dispatch(),this.running=!0};var o=qc.defineBehaviour("qc.engine.GameOverManager",qc.Behaviour,function(){},{retryButton:qc.Serializer.NODE,score:qc.Serializer.NODE});o.prototype.awake=function(){this.gameObject.visible=!1,s.instance.GAME_OVER.add(this.onGameOver,this),this.retryButton.onClick.add(this.onClickRetry,this),this.game.input.onKeyDown.add(this.onKeyDown,this)},o.prototype.onGameOver=function(){this.gameObject.visible=!0,this.score.text=a.instance.score+""},o.prototype.onClickRetry=function(){this.gameObject.visible=!1,s.instance.restart()},o.prototype.onKeyDown=function(e){e==13&&!s.instance.running&&this.onClickRetry()};var u=qc.defineBehaviour("qc.engine.Player",qc.Behaviour,function(){u.instance=this,this.speed=0,this.gravity=.6,this.groundHeight=100,this.doubleJumped=!1,this.radius=50,this.jumpHeight=20,this.doubleJumpHeight=15,this.smashSpeed=35,this.dragStartY=0},{});u.prototype.awake=function(){s.instance.GAME_START.add(this.onGameStart,this),s.instance.GAME_OVER.add(this.onGameOver,this),s.instance.GAME_RESTART.add(this.onGameRestart,this),this.game.input.onPointerDown.add(this.onPointerDown,this),this.game.input.onPointerUp.add(this.onPointerUp,this)},u.prototype.onGameStart=function(){this.game.input.onKeyDown.add(this.onKeyDown,this),this.gameObject.anchoredY=-this.groundHeight},u.prototype.onGameRestart=function(){this.onGameStart()},u.prototype.onGameOver=function(){this.game.input.onKeyDown.remove(this.onKeyDown,this)},u.prototype.update=function(){if(!s.instance.running)return;this.speed+=this.gravity,this.gameObject.anchoredY<-this.groundHeight&&this.gameObject.anchoredY+this.speed>=-this.groundHeight&&this.land(),this.gameObject.anchoredY+=this.speed,this.gameObject.anchoredY>-this.groundHeight&&(this.gameObject.anchoredY=-this.groundHeight,this.doubleJumped=!1)},u.prototype.onKeyDown=function(e){e==65?this.jump():e==68&&this.smash()},u.prototype.jump=function(){this.gameObject.anchoredY>=-this.groundHeight?this.speed=-this.jumpHeight:this.doubleJumped||(this.speed=-this.doubleJumpHeight,this.doubleJumped=!0)},u.prototype.smash=function(){this.speed=this.smashSpeed},u.prototype.land=function(){this.gameObject.Animator.play("land")},u.prototype.onPointerDown=function(e,t,n){this.dragStartY=n},u.prototype.onPointerUp=function(e,t,n){var r=n-this.dragStartY;if(r==0)return;n-this.dragStartY<0?this.jump():n-this.dragStartY>0&&this.smash()};var a=qc.defineBehaviour("qc.engine.ScoreManager",qc.Behaviour,function(){a.instance=this,this.score=0},{});a.prototype.awake=function(){s.instance.GAME_RESTART.add(this.onGameRestart,this)},a.prototype.onGameRestart=function(){this.score=0,this.gameObject.text=this.score+""},a.prototype.add=function(e){this.score+=e,this.gameObject.text=this.score+""}}).call(this,this,Object)